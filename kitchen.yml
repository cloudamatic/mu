driver:
  name: ec2
  region: us-east-1
  subnet_id: subnet-00f6ebfde53bbdccd
  instance_type: t3.medium
  associate_public_ip: true
  interface: dns
  shared_credentials_profile: test_kitchen
  instance_initiated_shutdown_behavior: terminate
  tags:
      Name: kitchen-mu-node
      created-by: test-kitchen
  sudo: true

provisioner:
  name: chef_zero
  roles_path: roles
  chef_license: accept

verifier:
  name: inspec

platforms:
  - name: ubuntu
  - name: centos-7
  - name: centos-6
  - name: rhel-7
  - name: rhel-6
  - name: amazon
  - name: amazon2
  - name: windows

suites:
  - name: mu-install
    provisioner:
      name:   shell
      script: "/builds/cloudamatic/mu/install/installer"
      command: 'myip="$(dig +short myip.opendns.com @resolver1.opendns.com)" && sudo MU_BRANCH=development /tmp/installer -p $myip -m zach@zach.systems -o 2260'
      root_path: '/tmp/'
    includes:
      - centos-7
      - amazon2

  #- name: mu-node
  #  run_list:
  #    - recipe[mu-tools::newclient]
  #    - recipe[mu-tools::gcloud]
  #    - role[mu-node]
  #  includes:
      # - ubuntu
  #    - centos-7
      # - centos-6
      # - rhel-7
      # - rhel-6
      # - amazon
  #    - amazon2
      # - windows

  # - name: mu-master
  #   run_list:
  #     - role[mu-master]
